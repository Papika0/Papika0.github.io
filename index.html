<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&display=swap"
      rel="stylesheet"
    />
    <title>Redberry Knight Cup</title>
  </head>
  <body>
    <form>

      <div class="step step-1 ">
        <header class="header">
          <div class="icon">
            <img src="./img/icon/icon-logo.png" alt="icon" />
          </div>
          <img src="./img/logo.png" alt="logo" class="logo" />
        </header>

        <div class="step-1-scrlphoto"></div>
        <div class="step-1-fixed-side">
          <p id="p1-1">chess says</p>
          <p id="p2-1">who we are</p>
          <p id="pSmall-1">a lot about</p>

          <button type="button" class="GetS-Button">
            <p>Get Started</p>
            <img src="./img/icon/arrow-right-icon.png" alt="arrow-right" />
          </button>

        </div>
      </div>

      <div class="step step-2 ">

        <header class="header">
          <div class="icon">
            <img src="./img/icon/icon-logo.png" alt="icon" />
          </div>
          <img src="./img/logo.png" alt="logo" class="logo" />
        </header>

          <img
            src="./img/background/Registrationpage.png"
            class="step-2-fixed"
          />
          <p id="quote-2">“When you see a good move, look for a better one.”</p>
          <p id="author-2">- Emanuel Lasker</p>
          <p id="top-2">Start Creating Your Account</p>
          <hr id="hline-2" />

        <div class="stagenum-1" id="stagenum-1">
          <div id="num1done"><img src="./img/icon/stage-done.svg"></div>
          <div id="num1">1</div>
        </div>

        <hr id="bline-2" />
        <p class="stages" id="stages-1">Personal information</p>
        <div class="stagenum-2"><p>2</p></div>
        <p class="stages" id="stages-2">Chess experience</p>
        <p class="formh">Personal information</p>
        <p class="formp">This is basic information fields</p>

        <!-- popup Errors -->

        <div class="popup-name" id="popup-name">
          <div class="popup-header">
              <div class="popup-title"><img src="./img/icon/error.svg"> Invalid name</div>
              <button type="button" class="close-button"><img src="./img/icon/Close-button.svg" alt=""></button>
           </div>
           <div class="popup-body"> Please enter valid name
             </div>
       </div>
       <div class="popup-email" id="popup-email">
          <div class="popup-header">
              <div class="popup-title"><img src="./img/icon/error.svg"> Invalid email adress</div>
              <button type="button" class="close-button"><img src="./img/icon/Close-button.svg" alt=""></button>
           </div>
           <div class="popup-body"> Please enter valid email address
             </div>
       </div>
            <div class="popup-pnum" id="popup-pnum">
          <div class="popup-header">
              <div class="popup-title"><img src="./img/icon/error.svg"> Invalid phone number</div>
              <button type="button" class="close-button"><img src="./img/icon/Close-button.svg" alt=""></button>
           </div>
           <div class="popup-body"> Please enter valid phone number
             </div>
       </div>
          <div class="popup-date" id="popup-date">
          <div class="popup-header">
              <div class="popup-title"><img src="./img/icon/error.svg"> Invalid date</div>
              <button type="button" type="button" class="close-button"><img src="./img/icon/Close-button.svg" alt=""></button>
           </div>
           <div class="popup-body"> Please enter valid date
             </div>
       </div>

        <div class="form-side">
          <div class="input-0">
            <input type="text" id="Name" placeholder="Name" onkeyup = "setInput(this.id ,this.value)" onload = "getInput(this.id)" />
            <i class="check-valid"
              ><img src="./img/icon/check-circle-fill.png" alt=""
            /></i>
          </div>
          <div class="input-0">
            <input type="Email" id="Email" placeholder="Email" onkeyup = "setInput(this.id ,this.value)" onload = "getInput(this.id)" />
            <i class="check-valid"
              ><img src="./img/icon/check-circle-fill.png" alt=""
            /></i>
          </div>
          <div class="input-0">
            <input
              type="text"
              placeholder="Phone number"
              id="Pnumber"
              onkeypress="return /[0-9]/i.test(event.key)"
              onkeyup = "setInput(this.id ,this.value)"
              onload = "getInput(this.id)"
            />
            <i class="check-valid"
              ><img src="./img/icon/check-circle-fill.png" alt=""
            /></i>
          </div>
          <div class="input-0">
            <input
              type="text"
              id="Date"
              placeholder="Date"
              onclick="(this.type='date')"
              onblur="(this.type='text')"
              onchange="setInput(this.id ,this.value)"
              onload = "getInput(this.id)"
            />
            <i class="check-valid"
              ><img src="./img/icon/check-circle-fill.png" alt=""
            /></i>
          </div>
        </div>

        <button type="submit" id="next-valid" class="next-btn">
          <p>Next</p>
          <img src="./img/icon/arrow-right-icon.png" alt="arrow-right" />
        </button>

        <button type="button" class="back-btn">
          <p>Back</p>
        </button>

      </div>

      <div class="step step-3 active ">

        <header class="header">
          <div class="icon">
            <img src="./img/icon/icon-logo.png" alt="icon" />
          </div>
          <img src="./img/logo.png" alt="logo" class="logo" />
        </header>

          <img
            src="./img/background/Chess-exp-back.svg"
            alt="regPage"
            class="step-2-fixed"
          />
          <p id="quote-3">
            “Many have become chess masters;<br>no one has become the master of
            chess.”
          </p>
          <p id="author-3">- Siegbert Tarrasch</p>

        <p id="top-2">First step is done, continue to finish onboarding</p>
        <hr id="hline-2" />
        <div class="stagenum-1 done" id="stagenum-1">
          <div id="num1done"><img src="./img/icon/stage-done.svg"></div>
        </div>
        <hr id="bline-2" />
        <p class="stages" id="stages-1">Personal information</p>
        <div class="stagenum-2"><p>2</p></div>
        <p class="stages" id="stages-2">Chess experience</p>
        <p class="formh">Chess experience</p>
        <p class="formp">This is basic information fields</p>

        <div class="selection-1">
          <div class="selector1">
            <div id="selectField1">
              <p id="experience_level">Level of knowledge <span id="importance"> *</span></p>
              <img src="./img/icon/selector-arrow.svg" id="selector-arrow" />
            </div>
            <ul id="list1" class="hide"> 
              <li class="options1">
                <p>Nona Gaphrindashvili</p>
              </li>
              <li class="options1">
                <p>Mikhail Tal</p>
              </li>
              <li class="options1">
                <p>Bobby Fisher</p>
              </li>
            </ul>
          </div>
        </div>

        <div class="selection-2">
          <div class="selector">
            <div id="selectField">
              <p id="character_name">Choose your character <span id="importance"> *</span></p>
              <img src="./img/icon/selector-arrow.svg" id="selector-arrow" />
            </div>
            <ul id="list" class="hide">

            </ul>
          </div>
        </div>
           
        <p class="radioh">
          Have you participated in the Redberry Championship?
        </p>
       
        <label class="radiob1">
          <span class="label">Yes</span>
          <input type="radio" id="Yes" name="radio" checked onclick="radioOnClick(true)"/>
          <span class="checkmark"></span>
          </label>

        <label class="radiob2">
          <span class="label">No</span>
          <input type="radio" id="No" name="radio" onclick="radioOnClick(false)" />
          <span class="checkmark"></span>
          </label>
           
        <button type="button" class="next-btn">
          <p>Done</p>
        </button>

        <button type="button" class="back-btn">
          <p>Back</p>
        </button>

      </div>

      <div class="step step-4  ">
        <header class="header">
          <div class="icon">
            <img src="./img/icon/icon-logo.png" alt="icon" />
          </div>
          <img src="./img/logo.png" alt="logo" class="logo" />
        </header>
        <section>
          <img
            src="./img/background/finish-page.svg"
            class="step-2-fixed"
          />
      
      <div class="completed">
        <div class="rocket">
          <div class="mobile6"></div>
          <div class="mobile3"></div>
          <div class="mobile4"></div>
          <div class="mobile5"></div>
          <div class="mobile7"></div>
          <div class="mobile1"></div>

          <div class="screen1"></div>
          <div class="screen2"></div>
          <div class="screen3"></div>
          <div class="screen4"></div>
          <div class="screen5"></div>
          <div class="screen6"></div>

          <div class="smoke1"></div>

        </div>
        <p>Onboarding completed!</p>
      </div>
      </div>

    </form>
    <script src="app.js"></script>
    <script src="selection.js"></script>
    <script src="./step-changer.js"></script>
    <script src="./done-post.js"></script>
    <script>
      function radioOnClick (value) {
        sessionStorage.setItem("already_participated" , value)
        console.log(sessionStorage.getItem("already_participated"));
      }

      function radioCheck () {
        if (sessionStorage.getItem("already_participated") == "true") {
          document.getElementById("Yes").checked = true;
          document.getElementById("No").checked = false;
          console.log("yes");
        }
        else {
          document.getElementById("Yes").checked = false;
          document.getElementById("No").checked = true;
          console.log("no");
        }
      }

     function optionOnClick (name) {
      document.getElementById("character_name").innerHTML = name;
      document.getElementById("list").classList.toggle("hide");
      document.getElementById("selector-arrow").classList.toggle("rotate");
     }



    async function getGrandmasters() {
      const response = await fetch(
        "https://chess-tournament-api.devtest.ge/api/grandmasters"
      );
      const data = await response.json();
      document.getElementById("list").innerHTML = `<li class="count">
                    <p>(Total ${data.length})</p>
                    </li>`;
      data.map((char) => {
        var optionCreation = document.createElement("li");
        optionCreation.id = "option" + char.id;
        optionCreation.classList.add("options");
        optionCreation.onclick = function () {
         optionOnClick(char.name);
         sessionStorage.setItem("character_id", char.id)
         sessionStorage.setItem("character_name", char.name)
          };

        optionCreation.innerHTML = `<p>${char.name}</p>
        <img src="https://chess-tournament-api.devtest.ge/${char.image}" />`;
        document.getElementById("list").appendChild(optionCreation);
          });
    }
    function checkSession (id) {
      if (sessionStorage.getItem(id) != undefined || sessionStorage.getItem(id) != null ) {
        document.getElementById(id).value = sessionStorage.getItem(id)
      }
     }
     
     function checkSessionSelect (id) {
      if (sessionStorage.getItem(id) != undefined || sessionStorage.getItem(id) != null ) {
       document.getElementById(id).innerHTML = sessionStorage.getItem(id);
      }}

      window.onload = (event) => {
        getGrandmasters().then(checkSessionSelect("character_name"));
        checkSession("Name");
        checkSession("Email");
        checkSession("Pnumber");
        checkSession("Date");
        checkSessionSelect("experience_level")  
        radioCheck();
        
      }
    </script>
  </body>
</html>
